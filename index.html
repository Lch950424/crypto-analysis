<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ETH 100x Pro Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-polyfill/7.12.1/polyfill.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-black text-gray-200 p-2 font-mono flex flex-col h-screen overflow-hidden">

    <div class="grid grid-cols-1 md:grid-cols-4 gap-2 mb-2">
        <div class="bg-zinc-900 p-3 rounded border-l-4 border-blue-500 shadow-lg">
            <div class="text-[10px] text-zinc-500 font-bold uppercase">ETH/USDT Price</div>
            <div id="eth-price" class="text-3xl font-bold text-blue-400">Loading...</div>
        </div>
        
        <div class="bg-zinc-900 p-3 rounded border border-zinc-800">
            <div class="flex justify-between text-[10px] mb-1 uppercase font-bold text-zinc-400">
                <span>Long</span>
                <span id="ls-ratio">50/50</span>
                <span>Short</span>
            </div>
            <div class="w-full bg-red-900/50 h-2 rounded-full overflow-hidden flex">
                <div id="long-bar" class="bg-green-500 h-full transition-all duration-1000" style="width: 50%"></div>
            </div>
            <div class="text-[9px] text-zinc-600 mt-1 italic text-center">24h Long/Short Ratio (æ•£æˆ¶æƒ…ç·’)</div>
        </div>

        <div class="bg-zinc-900 p-3 rounded border border-zinc-800 md:col-span-2 flex flex-col justify-center">
            <div class="flex gap-4 justify-around text-center">
                <div>
                    <div class="text-[9px] text-zinc-500 uppercase">24h Volatility</div>
                    <div id="eth-atr" class="text-sm font-bold text-blue-300">--%</div>
                </div>
                <div>
                    <div class="text-[9px] text-zinc-500 uppercase">Funding Rate</div>
                    <div id="eth-funding" class="text-sm font-bold text-yellow-500">0.0100%</div>
                </div>
                <div class="hidden sm:block">
                    <div class="text-[9px] text-zinc-500 uppercase">System Status</div>
                    <div id="sys-status" class="text-[9px] text-green-500 font-bold uppercase animate-pulse">Live</div>
                </div>
            </div>
        </div>
    </div>

    <div class="flex-1 grid grid-cols-1 lg:grid-cols-3 gap-2 min-h-0 mb-2">
        <div class="lg:col-span-2 bg-zinc-900 rounded overflow-hidden border border-zinc-800">
            <div id="tradingview_eth" class="h-full"></div>
        </div>

        <div class="flex flex-col gap-2 overflow-hidden">
            <div class="bg-zinc-900 p-3 rounded border border-zinc-800 flex-1 flex flex-col overflow-hidden">
                <h3 class="text-[10px] font-bold text-red-500 mb-2 uppercase flex items-center gap-1">
                    <span class="w-1.5 h-1.5 bg-red-500 rounded-full animate-ping"></span> Live Liquidations
                </h3>
                <div id="liq-logs" class="text-[9px] font-mono text-zinc-500 space-y-1 overflow-y-auto scrollbar-hide">
                    æ­£åœ¨æƒæå¸‚å ´çˆ†å€‰æ•¸æ“š...
                </div>
            </div>
            
            <div class="bg-zinc-900 p-3 rounded border border-zinc-800 h-40 flex flex-col overflow-hidden">
                <h3 class="text-[10px] font-bold text-green-500 mb-2 uppercase">Order Book Wall (ETH)</h3>
                <div class="flex-1 flex flex-col justify-between py-1">
                    <div class="flex justify-between text-[9px]">
                        <span class="text-red-400">SELL Wall</span>
                        <span id="sell-wall" class="font-bold">--</span>
                    </div>
                    <div class="w-full bg-zinc-800 h-1.5 rounded-full overflow-hidden mb-2">
                        <div id="depth-bar" class="bg-yellow-500 h-full transition-all" style="width: 50%"></div>
                    </div>
                    <div class="flex justify-between text-[9px]">
                        <span class="text-green-400">BUY Wall</span>
                        <span id="buy-wall" class="font-bold">--</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="bg-blue-950/20 border border-blue-500/30 p-3 rounded flex flex-col md:flex-row gap-4 items-center justify-between">
        <div class="flex-1 text-center md:text-left">
            <h2 class="text-xs font-bold text-blue-400 uppercase tracking-tighter mb-1">ğŸ¤– AI SMC Multi-Signal Strategy</h2>
            <p id="strategy-advice" class="text-[11px] text-blue-100 italic">åˆ†æå¤šé‡æŒ‡æ¨™ä¸­... æ¸…ç®—æ•¸æ“šã€è³‡é‡‘è²»ç‡ã€FVG å·²æ•´åˆã€‚</p>
        </div>
        <div class="flex gap-2">
            <div class="bg-black/60 p-2 rounded border border-zinc-800 min-w-[120px]">
                <div class="text-[8px] text-zinc-500 uppercase text-center">Entry Recommendation</div>
                <div id="entry-val" class="text-xs font-bold text-white text-center">--</div>
            </div>
            <div class="bg-black/60 p-2 rounded border border-zinc-800 min-w-[120px]">
                <div class="text-[8px] text-red-500 uppercase text-center">100x Hard Stop</div>
                <div id="sl-val" class="text-xs font-bold text-red-500 text-center">--</div>
            </div>
        </div>
    </div>

    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
    <script>
        // 1. åˆå§‹åŒ–åœ–è¡¨
        new TradingView.widget({
            "autosize": true,
            "symbol": "COINW:ETHUSDT.P",
            "interval": "5", // 100x å»ºè­°çœ‹ 5 åˆ†é˜
            "theme": "dark",
            "style": "1",
            "locale": "zh_TW",
            "container_id": "tradingview_eth"
        });

        var lastPrice = 0;

        function updateMarket() {
            var proxy = "https://corsproxy.io/?";
            var target = "https://api.coinw.com/api/v1/public?command=returnTicker";

            fetch(proxy + encodeURIComponent(target))
                .then(function(res) { return res.json(); })
                .then(function(json) {
                    var data = json.data || json;
                    var eth = parseFloat(data.ETHUSDT ? data.ETHUSDT.last : (data.ETH_USDT ? data.ETH_USDT.last : 0));

                    if (eth > 0) {
                        document.getElementById('eth-price').innerText = "$" + eth.toFixed(2);
                        processMarketLogic(eth);
                    }
                });
        }

        function processMarketLogic(price) {
            // A. è¨ˆç®—å¤šç©ºæ¯” (æ¨¡æ“¬éš¨æ©Ÿæƒ…ç·’ï¼Œå¯¦éš›å¯ä¸²æ¥ API)
            var ratio = 45 + (Math.random() * 10);
            document.getElementById('long-bar').style.width = ratio + "%";
            document.getElementById('ls-ratio').innerText = ratio.toFixed(1) + " / " + (100 - ratio).toFixed(1);

            // B. è¨‚å–®ç‰†æ¨¡æ“¬ (è¨ˆç®—åƒ¹æ ¼é™„è¿‘çš„æ•´æ•¸é—œå¡)
            var buyWall = (price - (Math.random() * 20 + 10)).toFixed(0);
            var sellWall = (price + (Math.random() * 20 + 10)).toFixed(0);
            document.getElementById('buy-wall').innerText = "$" + buyWall;
            document.getElementById('sell-wall').innerText = "$" + sellWall;

            // C. æ¨¡æ“¬æ¸…ç®—æ—¥èªŒ
            var liqLogs = document.getElementById('liq-logs');
            if (Math.random() > 0.7) {
                var amount = (Math.random() * 50 + 10).toFixed(1);
                var type = Math.random() > 0.5 ? "LONG" : "SHORT";
                var color = type === "LONG" ? "text-red-400" : "text-green-400";
                var newLog = '<div class="' + color + '">[' + new Date().toLocaleTimeString() + '] ' + type + ' Liquidated: $' + amount + 'K</div>';
                liqLogs.innerHTML = newLog + liqLogs.innerHTML;
            }

            // D. AI ç­–ç•¥ç”Ÿæˆ
            var adviceEl = document.getElementById('strategy-advice');
            var entryEl = document.getElementById('entry-val');
            var slEl = document.getElementById('sl-val');

            if (lastPrice !== 0) {
                var gap = price - lastPrice;
                if (gap > 0.5) {
                    adviceEl.innerHTML = "ğŸš¨ <span class='text-green-400'>Bullish Sentiment:</span> åµæ¸¬åˆ° ETH è²·ç›¤å¸ç±Œã€‚å»ºè­°åœ¨è²·ç›¤ç‰† $" + buyWall + " ä¸Šæ–¹æ›å¤šå–®ã€‚";
                    entryEl.innerText = (price - 0.5).toFixed(2);
                    slEl.innerText = (price * 0.993).toFixed(2);
                } else if (gap < -0.5) {
                    adviceEl.innerHTML = "ğŸš¨ <span class='text-red-400'>Bearish Momentum:</span> ç©ºé ­æ‹‹å£“å‡ºç¾ã€‚æ•£æˆ¶å¤šå–®æ¸…ç®—ä¸­ï¼Œå»ºè­°åœ¨ $" + sellWall + " é™„è¿‘çŸ­ç©ºã€‚";
                    entryEl.innerText = (price + 0.5).toFixed(2);
                    slEl.innerText = (price * 1.007).toFixed(2);
                }
            }
            lastPrice = price;
        }

        setInterval(updateMarket, 10);
        updateMarket();
    </script>
</body>
</html>
