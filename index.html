<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CoinW 100x AI æˆ°ç•¥çµ‚ç«¯</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-polyfill/7.12.1/polyfill.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-black text-gray-200 p-4 font-mono flex flex-col min-h-screen">

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
        <div class="bg-zinc-900 p-6 rounded-lg border-l-4 border-green-500 shadow-lg">
            <div class="text-[10px] text-zinc-500 font-bold tracking-widest uppercase">CoinW BTC/USDT</div>
            <div id="btc-price" class="text-4xl font-bold text-green-400 mt-1">é€£ç·šä¸­...</div>
            <div id="api-status" class="text-[9px] text-zinc-600 mt-2 italic">ç³»çµ±åˆå§‹åŒ–...</div>
        </div>
        <div class="bg-zinc-900 p-4 rounded-lg border border-zinc-800 flex flex-col">
            <h3 class="text-xs font-bold text-purple-400 mb-2 uppercase flex justify-between">
                <span>SMC å¯¦æ™‚åˆ†ææ—¥èªŒ</span>
                <span class="text-[9px] text-zinc-600">æ›´æ–°é »ç‡: 10S</span>
            </h3>
            <div id="smc-log" class="text-[10px] text-zinc-500 overflow-y-auto flex-1 h-20 scrollbar-hide">
                æ­£åœ¨ç­‰å¾… CoinW æ•¸æ“šæµå…¥...
            </div>
        </div>
    </div>

    <div id="strategy-card" class="bg-blue-950/20 border border-blue-500/30 p-8 rounded-xl text-center shadow-2xl">
        <h2 class="text-xl font-bold text-blue-400 mb-4 tracking-tighter italic">ğŸ¤– AI SMC ç­–ç•¥æ±ºç­–ç³»çµ±</h2>
        <p id="strategy-advice" class="text-base text-blue-100 leading-relaxed">æ­£åœ¨åˆ†æè¨‚å–®ç°¿ä¸å¹³è¡¡å€é–“ (FVG)...</p>
        
        <div class="grid grid-cols-2 gap-4 mt-6 max-w-md mx-auto">
            <div class="bg-black/60 p-3 rounded border border-zinc-800">
                <div class="text-[10px] text-zinc-500 uppercase">å»ºè­°é€²å ´</div>
                <div id="entry-val" class="text-lg font-bold text-white">--</div>
            </div>
            <div class="bg-black/60 p-3 rounded border border-zinc-800">
                <div class="text-[10px] text-red-500 uppercase">100x å¼·å¹³ä½</div>
                <div id="sl-val" class="text-lg font-bold text-red-500">--</div>
            </div>
        </div>
    </div>

    <script>
        var lastPrice = 0;

        function updateData() {
            var btcEl = document.getElementById('btc-price');
            var statusEl = document.getElementById('api-status');
            var logEl = document.getElementById('smc-log');
            var adviceEl = document.getElementById('strategy-advice');
            var entryEl = document.getElementById('entry-val');
            var slEl = document.getElementById('sl-val');

            // ä½¿ç”¨ä»£ç†ç¹é CORS é™åˆ¶
            var proxy = "https://corsproxy.io/?";
            var target = "https://api.coinw.com/api/v1/public?command=returnTicker";

            statusEl.innerText = "æ­£åœ¨å‘ CoinW è«‹æ±‚æ•¸æ“š...";

            fetch(proxy + encodeURIComponent(target))
                .then(function(res) { return res.json(); })
                .then(function(json) {
                    var data = json.data || json;
                    // é©é… CoinW API çš„å„ç¨®å›å‚³æ ¼å¼
                    var btc = parseFloat(data.BTCUSDT ? data.BTCUSDT.last : (data.BTC_USDT ? data.BTC_USDT.last : 0));

                    if (btc > 0) {
                        btcEl.innerText = "$" + btc.toFixed(2);
                        statusEl.innerText = "æ•¸æ“šåŒæ­¥æˆåŠŸ (" + new Date().toLocaleTimeString() + ")";

                        // SMC æŒ‡æ¨™æ¼”ç®—æ³•
                        if (lastPrice !== 0) {
                            var gap = btc - lastPrice;
                            if (Math.abs(gap) > 10) {
                                var type = gap > 0 ? "BULLISH FVG" : "BEARISH FVG";
                                var color = gap > 0 ? "text-green-400" : "text-red-400";
                                
                                // æ›´æ–°æ—¥èªŒ
                                logEl.innerHTML = "<div>[" + new Date().toLocaleTimeString() + "] <span class='" + color + " font-bold'>" + type + "</span> åµæ¸¬ (ä½ç§» " + gap.toFixed(2) + ")</div>" + logEl.innerHTML;
                                
                                // æ›´æ–°å»ºè­°
                                adviceEl.innerHTML = "åµæ¸¬åˆ° <b>" + type + "</b>ã€‚ä¸»åŠ›æ­£åœ¨ç™¼åŠ›ï¼Œ100x å»ºè­°åœ¨ <b>$" + (btc - (gap * 0.4)).toFixed(2) + "</b> é™„è¿‘å°‹æ±‚å…¥å ´ã€‚";
                                entryEl.innerText = (btc - (gap * 0.4)).toFixed(2);
                                slEl.innerText = (btc * (gap > 0 ? 0.992 : 1.008)).toFixed(2);
                            } else {
                                adviceEl.innerText = "å¸‚å ´çµæ§‹ç›¤æ•´ä¸­ï¼Œç›®å‰ç„¡æ˜é¡¯ SMC ç¼ºå£ä¿¡è™Ÿã€‚";
                            }
                        }
                        lastPrice = btc;
                    }
                })
                .catch(function(err) {
                    statusEl.innerText = "é€£ç·šå¤±æ•—ï¼šä»£ç†ä¼ºæœå™¨æˆ– CoinW API ç„¡å›æ‡‰";
                    console.error(err);
                });
        }

        // åŸ·è¡Œå¾ªç’°ï¼š10 ç§’æ›´æ–°
        setInterval(updateData, 10);
        updateData();
    </script>
</body>
</html>
