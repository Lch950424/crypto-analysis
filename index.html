<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>CoinW 100x AI ÂØ¶ÊôÇÊà∞È¨•ÁµÇÁ´Ø</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>
    <style>
        .glow-text { text-shadow: 0 0 8px rgba(34, 197, 94, 0.8); }
        .panel-bg { background: rgba(15, 15, 15, 0.95); }
    </style>
</head>
<body class="bg-black text-white p-2 overflow-hidden h-screen flex flex-col">

    <div class="flex gap-2 mb-2 h-16">
        <div class="panel-bg p-2 rounded flex-1 border-l-4 border-green-500">
            <span class="text-[10px] text-gray-500 uppercase font-bold">CoinW BTC/USDT</span>
            <div id="btc-price" class="text-2xl font-mono font-bold glow-text">0.00</div>
        </div>
        <div class="panel-bg p-2 rounded flex-1 border-l-4 border-blue-500">
            <span class="text-[10px] text-gray-500 uppercase font-bold">CoinW ETH/USDT</span>
            <div id="eth-price" class="text-2xl font-mono font-bold text-blue-400">0.00</div>
        </div>
    </div>

    <div class="flex-1 grid grid-cols-1 lg:grid-cols-2 gap-2">
        <div class="relative bg-gray-900 rounded overflow-hidden border border-gray-800">
            <div id="btc-chart" class="w-full h-full"></div>
            <div class="absolute top-2 left-2 bg-black/60 p-1 text-[10px] rounded">SMC & FVG Enabled</div>
        </div>
        <div class="relative bg-gray-900 rounded overflow-hidden border border-gray-800">
            <div id="eth-chart" class="w-full h-full"></div>
            <div class="absolute top-2 left-2 bg-black/60 p-1 text-[10px] rounded">SMC & FVG Enabled</div>
        </div>
    </div>

    <div class="h-32 mt-2 flex gap-2">
        <div class="panel-bg p-3 rounded flex-1 border border-red-900/50">
            <h3 class="text-xs font-bold text-red-500 mb-1">üö® AI 100x Á≠ñÁï•Âª∫Ë≠∞</h3>
            <div id="ai-advice" class="text-xs text-gray-300">Ê≠£Âú®ÂêåÊ≠• CoinW Ë®ÇÂñÆÁ∞øÊï∏Êìö...</div>
        </div>
        <div class="panel-bg p-3 rounded w-64 border border-purple-900/50 overflow-y-auto">
            <h3 class="text-xs font-bold text-purple-400 mb-1">Smart Money Logs</h3>
            <div id="smc-logs" class="text-[10px] font-mono space-y-1"></div>
        </div>
    </div>

    <script>
        // 1. ÂàùÂßãÂåñÊ•µÈÄüÂúñË°® (Lightweight Charts)
        function createChart(containerId, color) {
            const chart = LightweightCharts.createChart(document.getElementById(containerId), {
                layout: { backgroundColor: '#000', textColor: '#d1d4dc' },
                grid: { vertLines: { color: '#1f1f1f' }, horzLines: { color: '#1f1f1f' } },
                timeScale: { timeVisible: true, secondsVisible: true }
            });
            const candleSeries = chart.addCandlestickSeries({
                upColor: '#26a69a', downColor: '#ef5350', borderVisible: false,
                wickUpColor: '#26a69a', wickDownColor: '#ef5350'
            });
            return { chart, candleSeries };
        }

        const btcData = createChart('btc-chart', '#22c55e');
        const ethData = createChart('eth-chart', '#3b82f6');

        // 2. CoinW WebSocket ÂØ¶ÊôÇÊï∏ÊìöÈÄ£Êé•
        function connectCoinW() {
            // Ê®°Êì¨ CoinW WebSocket ÈÇèËºØ (Ë´ã‰æùÊìö CoinW ÊúÄÊñ∞ WSS API Ë™øÊï¥Ë®ÇÈñ±ÂèÉÊï∏)
            const ws = new WebSocket('wss://api.coinw.com/ws/public');
            
            ws.onmessage = (event) => {
                const msg = JSON.parse(event.data);
                // ÈÄôË£°ËôïÁêÜÊØ´ÁßíÁ¥öÂÉπÊ†ºÊõ¥Êñ∞
                if (msg.type === 'ticker') {
                    updatePrice(msg.symbol, msg.price);
                }
                // ÈÄôË£°ËôïÁêÜ K Á∑öÊõ¥Êñ∞‰∏¶Ë®àÁÆó FVG/SMC
                if (msg.type === 'kline') {
                    analyzeIndicators(msg.symbol, msg.data);
                }
            };

            // Ê®°Êì¨ÂØ¶ÊôÇË∑≥Âãï (Demo È°ØÁ§∫)
            setInterval(() => {
                const btcPrice = (96000 + Math.random() * 50).toFixed(2);
                const ethPrice = (2400 + Math.random() * 2).toFixed(2);
                updatePrice('btc', btcPrice);
                updatePrice('eth', ethPrice);
            }, 10); // 0.01ÁßíÁ¥öÊõ¥Êñ∞
        }

        function updatePrice(symbol, price) {
            const el = document.getElementById(`${symbol}-price`);
            if (el) el.innerText = price;
        }

        // 3. ÊåáÊ®ôÁÆóÊ≥ïÔºöFVG / IFVG & SMC (LuxAlgo Style)
        let candleHistory = [];
        function analyzeIndicators(symbol, candle) {
            candleHistory.push(candle);
            if (candleHistory.length < 3) return;

            const i = candleHistory.length - 1;
            const prev2 = candleHistory[i-2];
            const prev1 = candleHistory[i-1];
            const curr = candleHistory[i];

            // FVG Ê™¢Ê∏¨ÈÇèËºØ
            if (prev2.high < curr.low) {
                logSMC("Bullish FVG Detect", "green");
                updateAIAdvice("BULLISH", "ÁôºÁèæÁúãÊº≤ FVG Áº∫Âè£ÔºåÂª∫Ë≠∞ÂõûË™øÈÄ≤Â§ö");
            } else if (prev2.low > curr.high) {
                logSMC("Bearish FVG Detect", "red");
                updateAIAdvice("BEARISH", "ÁôºÁèæÁúãË∑å FVG Áº∫Âè£ÔºåÊÖéÈò≤ 100x Â§öÂñÆ");
            }

            // SMC - BOS ÁµêÊßãÁ™ÅÁ†¥Ê™¢Ê∏¨
            if (curr.close > Math.max(...candleHistory.slice(-10).map(c => c.high))) {
                logSMC("BOS Breakout Up", "purple");
            }
        }

        function logSMC(msg, color) {
            const logBox = document.getElementById('smc-logs');
            const entry = document.createElement('div');
            entry.className = `text-${color}-500 border-b border-gray-800 pb-1`;
            entry.innerText = `[${new Date().toLocaleTimeString()}] ${msg}`;
            logBox.prepend(entry);
        }

        function updateAIAdvice(type, msg) {
            const adviceBox = document.getElementById('ai-advice');
            const color = type === "BULLISH" ? "text-green-400" : "text-red-400";
            adviceBox.innerHTML = `<span class="${color} font-bold">[${type}]</span> ${msg} <br> <span class="text-[10px]">ÊéõÂñÆÂª∫Ë≠∞Ôºö${(96100).toFixed(2)} | Ê≠¢ÊêçÔºö0.5%</span>`;
        }

        connectCoinW();
    </script>
</body>
</html>
