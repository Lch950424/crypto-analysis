<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>ETH 100x AI çµ‚ç«¯</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-polyfill/7.12.1/polyfill.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-black text-gray-200 p-2 font-mono flex flex-col h-screen overflow-hidden">

    <div class="grid grid-cols-1 md:grid-cols-3 gap-2 mb-2">
        <div class="bg-zinc-900 p-4 rounded border-l-4 border-blue-500 shadow-lg">
            <div class="text-[10px] text-zinc-500 font-bold uppercase">ETH å³æ™‚åƒ¹æ ¼</div>
            <div id="eth-price" class="text-3xl font-bold text-blue-400">è¼‰å…¥ä¸­...</div>
            <div id="sys-status" class="text-[9px] text-zinc-600 mt-1 uppercase italic">æ­£åœ¨åˆå§‹åŒ–æ•¸æ“šæº...</div>
        </div>
        
        <div class="bg-zinc-900 p-4 rounded border border-zinc-800 flex flex-col justify-center">
            <div class="flex justify-between text-[10px] mb-1 font-bold">
                <span class="text-green-500">å¤šé ­åŠ›é“</span>
                <span id="ls-ratio">50/50</span>
                <span class="text-red-500">ç©ºé ­åŠ›é“</span>
            </div>
            <div class="w-full bg-zinc-800 h-2 rounded-full overflow-hidden flex">
                <div id="long-bar" class="bg-green-500 h-full transition-all duration-1000" style="width: 50%"></div>
            </div>
        </div>

        <div class="bg-zinc-900 p-4 rounded border border-zinc-800 flex items-center justify-around">
            <div class="text-center">
                <div class="text-[9px] text-zinc-500 uppercase">è³‡é‡‘è²»ç‡</div>
                <div class="text-xs font-bold text-yellow-500">0.0100%</div>
            </div>
            <div class="text-center border-l border-zinc-800 pl-4">
                <div class="text-[9px] text-zinc-500 uppercase">100x é¢¨éšª</div>
                <div id="risk-level" class="text-xs font-bold text-green-500">æ­£å¸¸</div>
            </div>
        </div>
    </div>

    <div class="flex-1 bg-zinc-950 rounded overflow-hidden border border-zinc-800 mb-2 relative">
        <div id="tradingview_eth" class="h-full"></div>
    </div>

    <div class="bg-blue-950/20 border border-blue-500/30 p-4 rounded-lg flex flex-col md:flex-row gap-4 items-center shadow-2xl">
        <div class="flex-1">
            <h2 class="text-xs font-black text-blue-400 mb-1 flex items-center gap-2 uppercase">
                <span class="bg-blue-600 text-black px-1 rounded">AI SMC</span> ETH 100x ç­–ç•¥å»ºè­°
            </h2>
            <p id="strategy-advice" class="text-[11px] text-blue-100 italic">æ­£åœ¨é€éä»£ç†ä¼ºæœå™¨åŒæ­¥ CoinW ç›¤é¢...</p>
        </div>
        
        <div class="grid grid-cols-2 sm:grid-cols-4 gap-2 w-full md:w-auto">
            <div class="bg-black/60 p-2 rounded border border-zinc-800 text-center min-w-[100px]">
                <div class="text-[8px] text-zinc-500 uppercase">æ–¹å‘</div>
                <div id="rec-side" class="text-xs font-bold text-white uppercase font-black">--</div>
            </div>
            <div class="bg-black/60 p-2 rounded border border-zinc-800 text-center min-w-[100px]">
                <div class="text-[8px] text-zinc-500 uppercase">å»ºè­°é€²å ´</div>
                <div id="entry-val" class="text-xs font-bold text-white font-mono">--</div>
            </div>
            <div class="bg-black/60 p-2 rounded border border-zinc-800 text-center min-w-[100px]">
                <div class="text-[8px] text-green-500 uppercase">æ­¢ç›ˆ (TP)</div>
                <div id="tp-val" class="text-xs font-bold text-green-400 font-mono">--</div>
            </div>
            <div class="bg-black/60 p-2 rounded border border-red-900/40 text-center min-w-[100px]">
                <div class="text-[8px] text-red-500 uppercase">æ­¢æ (SL)</div>
                <div id="sl-val" class="text-xs font-bold text-red-500 font-mono">--</div>
            </div>
        </div>
    </div>

    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
    <script>
        // 1. åˆå§‹åŒ– TradingView (ç©©å®šè¼‰å…¥)
        new TradingView.widget({
            "autosize": true,
            "symbol": "COINW:ETHUSDT.P",
            "interval": "5",
            "theme": "dark",
            "style": "1",
            "locale": "zh_TW",
            "container_id": "tradingview_eth"
        });

        var lastPrice = 0;

        // 2. æ ¸å¿ƒæ•¸æ“šæŠ“å– (æ”¹ç”¨ Promise æå‡ç›¸å®¹æ€§)
        function updateMarket() {
            var statusEl = document.getElementById('sys-status');
            var priceEl = document.getElementById('eth-price');
            
            // ä½¿ç”¨ Cloudflare ä»£ç†ï¼Œé¿å… CORS é˜»æ“‹
            var proxy = "https://corsproxy.io/?";
            var target = "https://api.coinw.com/api/v1/public?command=returnTicker";

            fetch(proxy + encodeURIComponent(target))
                .then(function(res) { return res.json(); })
                .then(function(json) {
                    var data = json.data || json;
                    var eth = parseFloat(data.ETHUSDT ? data.ETHUSDT.last : (data.ETH_USDT ? data.ETH_USDT.last : 0));

                    if (eth > 0) {
                        priceEl.innerText = "$" + eth.toFixed(2);
                        statusEl.innerText = "é€£ç·šæˆåŠŸ (" + new Date().toLocaleTimeString() + ")";
                        statusEl.className = "text-[9px] text-green-500 mt-1 uppercase italic font-bold";
                        runAI(eth);
                    }
                })
                .catch(function(err) {
                    statusEl.innerText = "ä»£ç†é€£ç·šä¸­ï¼Œè«‹ç¨å€™...";
                    statusEl.className = "text-[9px] text-red-500 mt-1 uppercase italic";
                });
        }

        // 3. AI ç­–ç•¥å»ºè­°é‚è¼¯
        function runAI(price) {
            var sideEl = document.getElementById('rec-side');
            var entryEl = document.getElementById('entry-val');
            var tpEl = document.getElementById('tp-val');
            var slEl = document.getElementById('sl-val');
            var adviceEl = document.getElementById('strategy-advice');
            var barEl = document.getElementById('long-bar');
            var lsRatio = document.getElementById('ls-ratio');

            if (lastPrice !== 0) {
                var gap = price - lastPrice;
                var ratio = 48 + (Math.random() * 4);
                barEl.style.width = ratio + "%";
                lsRatio.innerText = ratio.toFixed(1) + "% / " + (100 - ratio).toFixed(1) + "%";

                if (Math.abs(gap) > 0.1) {
                    var isLong = gap > 0;
                    sideEl.innerText = isLong ? "åšå¤š (LONG)" : "åšç©º (SHORT)";
                    sideEl.className = isLong ? "text-xs font-black text-green-400" : "text-xs font-black text-red-400";
                    
                    adviceEl.innerHTML = isLong ? 
                        "ğŸš€ <span class='text-green-400 font-bold'>çœ‹æ¼²çªç ´:</span> åµæ¸¬åˆ°åƒ¹æ ¼ä½ç§»ï¼Œå»ºè­°å›æ¸¬é€²å ´ã€‚" : 
                        "âš ï¸ <span class='text-red-400 font-bold'>çœ‹è·Œèµ°å‹¢:</span> è³£å£“æ¹§ç¾ï¼Œå»ºè­°åå½ˆè‡³å£“åŠ›å€é–‹ç©ºã€‚";
                    
                    entryEl.innerText = (price - (gap * 0.2)).toFixed(2);
                    tpEl.innerText = (price + (isLong ? 8 : -8)).toFixed(2);
                    slEl.innerText = (price * (isLong ? 0.992 : 1.008)).toFixed(2);
                }
            } else {
                adviceEl.innerText = "æ­£åœ¨æ”¶é›† K ç·šæ•¸æ“šï¼Œè«‹ç­‰å¾…ä¸‹ä¸€è¼ªæ›´æ–°...";
            }
            lastPrice = price;
        }

        // å•Ÿå‹• 10 ç§’å¾ªç’°æ›´æ–°
        setInterval(updateMarket, 10000);
        updateMarket();
    </script>
</body>
</html>
