<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CoinW ETH 100x AI çµ‚ç«¯</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-polyfill/7.12.1/polyfill.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-black text-gray-200 p-4 font-mono flex flex-col min-h-screen">

    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
        <div class="bg-zinc-900 p-6 rounded-lg border-l-4 border-blue-500 shadow-lg">
            <div class="text-[10px] text-zinc-500 font-bold uppercase tracking-widest">CoinW ETH/USDT</div>
            <div id="eth-price" class="text-4xl font-bold text-blue-400 mt-1">è¼‰å…¥ä¸­...</div>
            <div id="api-status" class="text-[9px] text-zinc-600 mt-2 italic">ç³»çµ±é€£ç·šä¸­...</div>
        </div>
        
        <div class="bg-zinc-900 p-4 rounded-lg border border-zinc-800 flex flex-col justify-center">
            <h3 class="text-xs font-bold text-purple-400 mb-2 uppercase">AI å¤šç©ºåŠ›é“æ¯”</h3>
            <div class="w-full bg-zinc-800 h-2 rounded-full overflow-hidden">
                <div id="sentiment-bar" class="bg-blue-500 h-full transition-all duration-700" style="width: 50%"></div>
            </div>
            <div id="sentiment-val" class="text-[10px] mt-2 text-zinc-500 text-center font-bold">ä¸­æ€§ 50%</div>
        </div>

        <div class="bg-zinc-900 p-4 rounded-lg border border-zinc-800">
            <h3 class="text-xs font-bold text-zinc-400 mb-1 uppercase">SMC åˆ†ææ—¥èªŒ</h3>
            <div id="smc-log" class="text-[10px] text-zinc-600 h-16 overflow-y-auto scrollbar-hide">
                æ­£åœ¨æƒæ ETH ç›¤é¢æ•¸æ“š...
            </div>
        </div>
    </div>

    <div class="flex-1 min-h-[450px] bg-gray-900 rounded-lg overflow-hidden border border-gray-800 mb-4">
        <div id="tradingview_eth" class="h-full"></div>
    </div>

    <div id="alert-panel" class="bg-blue-950/20 border border-blue-500/30 p-6 rounded-xl text-center shadow-2xl">
        <h2 class="text-xl font-bold text-blue-400 mb-3 italic tracking-tighter">ğŸ¤– AI ETH ç­–ç•¥æ±ºç­–ç³»çµ± (100x)</h2>
        
        <div class="p-4 bg-black/40 rounded border border-zinc-700 mb-4">
            <p id="strategy-advice" class="text-base text-gray-300">æ­£åœ¨åˆ†æè¨‚å–®ç°¿ä¸å¹³è¡¡å€é–“...</p>
        </div>

        <div class="grid grid-cols-2 gap-4 max-w-lg mx-auto">
            <div class="p-3 bg-zinc-900/80 rounded border border-zinc-800">
                <div class="text-[10px] text-zinc-500 uppercase">å»ºè­°é€²å ´ä½</div>
                <div id="entry-val" class="text-xl font-bold text-white">--</div>
            </div>
            <div class="p-3 bg-zinc-900/80 rounded border border-zinc-800">
                <div class="text-[10px] text-red-500 uppercase">100x å¼·å¹³åƒè€ƒ</div>
                <div id="sl-val" class="text-xl font-bold text-red-500">--</div>
            </div>
        </div>
    </div>

    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
    <script>
        // 1. åˆå§‹åŒ– ETH åœ–è¡¨
        new TradingView.widget({
            "autosize": true,
            "symbol": "COINW:ETHUSDT.P",
            "interval": "15",
            "theme": "dark",
            "style": "1",
            "locale": "zh_TW",
            "container_id": "tradingview_eth"
        });

        var lastPrice = 0;

        // 2. æ•¸æ“šæ›´æ–°é‚è¼¯
        function updateMarket() {
            var priceEl = document.getElementById('eth-price');
            var statusEl = document.getElementById('api-status');
            var logEl = document.getElementById('smc-log');
            var adviceEl = document.getElementById('strategy-advice');
            var barEl = document.getElementById('sentiment-bar');
            var sentVal = document.getElementById('sentiment-val');
            var entryEl = document.getElementById('entry-val');
            var slEl = document.getElementById('sl-val');

            var proxy = "https://corsproxy.io/?";
            var target = "https://api.coinw.com/api/v1/public?command=returnTicker";

            fetch(proxy + encodeURIComponent(target))
                .then(function(res) { return res.json(); })
                .then(function(json) {
                    var data = json.data || json;
                    var eth = parseFloat(data.ETHUSDT ? data.ETHUSDT.last : (data.ETH_USDT ? data.ETH_USDT.last : 0));

                    if (eth > 0) {
                        priceEl.innerText = "$" + eth.toFixed(2);
                        statusEl.innerText = "ETH æ•¸æ“šåŒæ­¥æˆåŠŸ (" + new Date().toLocaleTimeString() + ")";

                        // AI å»ºè­°é‚è¼¯
                        if (lastPrice !== 0) {
                            var gap = eth - lastPrice;
                            var score = 50;
                            var advice = "ç›¤æ•´ä¸­ï¼Œå»ºè­°è§€æœ› FVG ç¼ºå£å½¢æˆã€‚";

                            if (gap > 0.5) { // ETH æ³¢å‹•è¼ƒå°ï¼Œ0.5 é»ä½ç§»å³å…·åƒè€ƒåƒ¹å€¼
                                score = 75;
                                advice = "ğŸš€ åµæ¸¬åˆ° ETH çœ‹æ¼²å¤±è¡¡ã€‚å»ºè­°å›è¸©åšå¤šã€‚";
                                logEl.innerHTML = "<div>[" + new Date().toLocaleTimeString() + "] Bullish FVG åµæ¸¬</div>" + logEl.innerHTML;
                            } else if (gap < -0.5) {
                                score = 25;
                                advice = "âš ï¸ ETH çµæ§‹èµ°å¼±ã€‚å»ºè­°å°‹æ±‚åå½ˆåšç©ºæ©Ÿæœƒã€‚";
                                logEl.innerHTML = "<div>[" + new Date().toLocaleTimeString() + "] Bearish FVG åµæ¸¬</div>" + logEl.innerHTML;
                            }

                            // æ›´æ–°è¦–è¦ºåé¥‹
                            barEl.style.width = score + "%";
                            barEl.className = score > 50 ? "bg-green-500 h-full transition-all" : "bg-red-500 h-full transition-all";
                            sentVal.innerText = (score > 50 ? "çœ‹å¤š " : "çœ‹ç©º ") + score + "%";
                            adviceEl.innerHTML = advice;
                            
                            // 100x å»ºè­°æ•¸å€¼
                            entryEl.innerText = (eth - (gap * 0.3)).toFixed(2);
                            slEl.innerText = (eth * (score > 50 ? 0.993 : 1.007)).toFixed(2);
                        }
                        lastPrice = eth;
                    }
                })
                .catch(function(err) {
                    statusEl.innerText = "é€£ç·šè¶…æ™‚ï¼Œæ­£åœ¨é‡è©¦...";
                });
        }

        // æ¯ 10 ç§’æª¢æŸ¥ä¸€æ¬¡
        setInterval(updateMarket, 10);
        updateMarket();
    </script>
</body>
</html>
